@extends('database.layouts.main')

@section('dcontent')
    
    <div class="w-full h-full flex flex-col py-10 pt-2 px-12 pr-10 overflow-y-auto hide-scroll font-Mplus1cus">

        <div class="flex flex-col text-xs leading-none mb-12">
            <div class="flex items-center gap-2 font-medium">
                <p>Dashboard</p>
                <span>
                    <svg width="7" height="11" viewBox="0 0 7 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.07942 0.770967L6.19029 5.1375C6.31597 5.27036 6.37879 5.44086 6.37879 5.6115C6.37879 5.78205 6.31594 5.95249 6.19029 6.0855L2.07942 10.452C1.81743 10.7278 1.38107 10.7393 1.10471 10.4779C0.826401 10.2158 0.816576 9.77752 1.07778 9.50289L4.76635 5.61035L1.07778 1.71782C0.816576 1.44318 0.826343 1.00797 1.10471 0.743963C1.38107 0.482833 1.81743 0.494324 2.07942 0.770967Z" fill="#6B7280"/>
                    </svg>
                </span>
                <p class="text-subheader">Vulnerability Map</p>
            </div>
        </div>

        <div class="w-full h-full">
            <p class="font-bold text-xl text-[#1f2937]">Vulnerability Data</p>
            <a  href="{{ route('user.excel') }}" class="cursor-pointer text-subheader font-bold text-[13px] hover:scale-95 transition duration-200">Export Excel</a>

            <div class="w-full h-full flex flex-col gap-8 mt-8 pb-10 mb-10">
                @foreach ($users as $item)
                    <div id="{{ $item->vulnerability_name != null ? 'btn-edit-vulnerability' : 'btn-add-vulnerability'}}" data-id="{{ $item->id }}">
                        <div id="index_{{ $item->id }}" class="cursor-pointer w-full py-5 flex bg-white drop-shadow rounded-xl px-6 items-center gap-12">
        
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-md bg-cover bg-center" style="background-image: url({{Auth()->user()->profile_photo_url }})"></div>
                                <p class="text-header font-semibold text-[16px] no-underline">{{ $item->name }}</p>
                            </div>
    
                            <p class="text-subheader/60 font-semibold text-xs flex items-center gap-14 no-underline">{{ $item->classroom->name ?? 'No Class' }}<span>Male</span></p>
        
                            <div class="ml-auto"></div>
        
                            <ul class="flex gap-3 items-start flex-wrap flex-shrink-0 w-[35%] font-Mulish bg-red-150">
                                @foreach ($item->vulnerability_name as $vulnerabilityName)
                                    <li class="py-1.5 px-3 rounded text-[10px] font-bold tracking-wide bg-[#FFF9F0] text-[#FFB033] ">
                                        {{ $vulnerabilityName }}
                                    </li>
                                @endforeach
                            </ul>
    
                                <a>
                                    <svg class="" width="7" height="16" viewBox="0 0 9 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 16.6225L7.43043 10.192C8.18986 9.4326 8.18986 8.18991 7.43043 7.43048L1 1" stroke="#676767" stroke-opacity="0.5" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>                        
                                </a>
        
                        </div>
                    </div>
                @endforeach

                <div id="pagination-bar">
                    {{ $users->links() }}
                  </div>
               
            </div>

        </div>

    </div>

    @include('components.vulnerability-modal')
  

@endsection